syntax = "proto3";

package fb;

service Fakebook {
  rpc Register (RegisterRequest) returns (BasicReply) {}
  rpc Join (JoinRequest) returns (BasicReply) {}
  rpc List (ListRequest) returns (UserList) {} 
}

message BasicReply {
  bool success = 1;
  string message = 2; // only needed for when success is false
}

message RegisterRequest {
  string username = 1;
}

// at the moment the JoinRequest is the same as RegisterRequest
// we will keep them separate to remain flexible if in the future
// the parameters of these requests diverge
message JoinRequest {
  string username = 1;
}

// we have an empty request here in case we want to add parameters in the future
// without breaking existing code
message ListRequest {
  string username = 1;
}

message UserList {
  repeated string all_users = 1;
  repeated string joined_users = 2;
}

message MessageList {
  repeated Message messages = 1;
}

message Message {
  string username = 1;
  string date = 2;
  string message = 3;
}